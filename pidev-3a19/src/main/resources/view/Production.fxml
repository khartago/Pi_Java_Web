<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/8.0.171"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="controller.ProductionController"
      stylesheets="@111.css"
      styleClass="content-area"
      spacing="20"
      prefWidth="1000"
      prefHeight="650">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- ===== LANGUAGE BUTTONS (SAFE ADDITION) ===== -->
    <HBox spacing="10" alignment="CENTER_RIGHT">
        <Button text="EN" onAction="#switchToEnglish"/>
        <Button text="FR" onAction="#switchToFrench"/>
        <Button text="AR" onAction="#switchToArabic"/>
    </HBox>

    <!-- ================= TITLE ================= -->
    <Label text="%title" styleClass="page-title"/>

    <!-- ================= STATISTICS ================= -->
    <HBox spacing="25" alignment="CENTER_LEFT">

        <VBox styleClass="stat-card" spacing="8">
            <Label text="%total" styleClass="stat-title"/>
            <Label fx:id="totalLabel" text="0" styleClass="stat-value"/>
        </VBox>

        <VBox styleClass="stat-card" spacing="8">
            <Label text="%pending" styleClass="stat-title"/>
            <Label fx:id="pendingLabel" text="0" styleClass="stat-value"/>
        </VBox>

        <VBox styleClass="stat-card" spacing="8">
            <Label text="%complete" styleClass="stat-title"/>
            <Label fx:id="completeLabel" text="0" styleClass="stat-value"/>
        </VBox>

        <VBox styleClass="stat-card" spacing="8">
            <Label text="%quantity" styleClass="stat-title"/>
            <Label fx:id="quantityLabel" text="0" styleClass="stat-value"/>
        </VBox>

    </HBox>

    <!-- ================= SEARCH + SORT ================= -->
    <HBox spacing="15" alignment="CENTER_LEFT">

        <TextField fx:id="searchField"
                   promptText="%search"
                   prefWidth="250"/>

        <ComboBox fx:id="sortColumnBox"
                  promptText="%sort"
                  prefWidth="150"/>

        <ComboBox fx:id="sortOrderBox"
                  promptText="%order"
                  prefWidth="120"/>

        <Button text="%apply"
                onAction="#applySorting"
                styleClass="secondary-button"/>

        <Button text="%export"
                onAction="#generatePdf"
                prefWidth="150"
                style="-fx-background-color: #2E7D32; -fx-text-fill: white; -fx-font-weight: bold;" />

    </HBox>

    <!-- ================= TABS ================= -->
    <TabPane fx:id="tabPane" VBox.vgrow="ALWAYS">

        <tabs>

            <Tab text="%plantation" closable="false">

                <VBox spacing="18">

                    <padding>
                        <Insets top="12" right="0" bottom="12" left="0"/>
                    </padding>

                    <GridPane hgap="14" vgap="14">

                        <Label text="%name" styleClass="field-label"
                               GridPane.rowIndex="0" GridPane.columnIndex="0"/>

                        <TextField fx:id="tfNomPlant" styleClass="modern-input"
                                   GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="%variety" styleClass="field-label"
                               GridPane.rowIndex="1" GridPane.columnIndex="0"/>

                        <TextField fx:id="tfVariete" styleClass="modern-input"
                                   GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="%quantite" styleClass="field-label"
                               GridPane.rowIndex="2" GridPane.columnIndex="0"/>

                        <TextField fx:id="tfQuantite" styleClass="modern-input"
                                   GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                        <Label text="%date" styleClass="field-label"
                               GridPane.rowIndex="3" GridPane.columnIndex="0"/>

                        <DatePicker fx:id="dpDatePlante" styleClass="modern-input"
                                    GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                        <Label text="%season" styleClass="field-label"
                               GridPane.rowIndex="4" GridPane.columnIndex="0"/>

                        <TextField fx:id="tfSaison" styleClass="modern-input"
                                   GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                        <HBox spacing="10" alignment="CENTER_RIGHT"
                              GridPane.rowIndex="5" GridPane.columnIndex="1">

                            <Button text="%add"
                                    onAction="#ajouterProduction"
                                    styleClass="primary-button"/>

                            <Button text="%edit"
                                    onAction="#modifierProduction"
                                    styleClass="secondary-button"/>

                            <Button text="%delete"
                                    onAction="#supprimerProduction"
                                    styleClass="danger-button"/>

                            <Button text="%refresh"
                                    onAction="#refreshTable"
                                    styleClass="secondary-button"/>

                        </HBox>

                    </GridPane>

                    <TableView fx:id="tableProduction"
                               styleClass="table-view"
                               VBox.vgrow="ALWAYS">

                        <columns>

                            <TableColumn fx:id="colId" text="ID" prefWidth="60"/>
                            <TableColumn fx:id="colNomPlant" text="%name" prefWidth="130"/>
                            <TableColumn fx:id="colVariete" text="%variety" prefWidth="130"/>
                            <TableColumn fx:id="colQuantite" text="%quantite" prefWidth="100"/>
                            <TableColumn fx:id="colDatePlante" text="%date" prefWidth="120"/>
                            <TableColumn fx:id="colSaison" text="%season" prefWidth="100"/>
                            <TableColumn fx:id="colEtat" text="%etat" prefWidth="120"/>
                            <TableColumn fx:id="colAction" text="%action" prefWidth="140"/>

                        </columns>

                    </TableView>

                </VBox>

            </Tab>

            <Tab text="%productionPlant" closable="false">
                <AnchorPane fx:id="productionPlantContainer"
                            prefHeight="500"/>
            </Tab>

        </tabs>

    </TabPane>

</VBox>